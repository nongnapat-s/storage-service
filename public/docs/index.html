<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>คู่มือการใช้งานระบบ Storage Service | Storage Sevice Docs</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/storage-service/docs/assets/css/0.styles.21a59abc.css" as="style"><link rel="preload" href="/storage-service/docs/assets/js/app.1aaca16b.js" as="script"><link rel="preload" href="/storage-service/docs/assets/js/2.9cde0b82.js" as="script"><link rel="preload" href="/storage-service/docs/assets/js/5.1b3ec486.js" as="script"><link rel="prefetch" href="/storage-service/docs/assets/js/3.67c6f868.js"><link rel="prefetch" href="/storage-service/docs/assets/js/4.ba6480f3.js"><link rel="prefetch" href="/storage-service/docs/assets/js/6.b71de841.js">
    <link rel="stylesheet" href="/storage-service/docs/assets/css/0.styles.21a59abc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/storage-service/docs/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Storage Sevice Docs</span></a> <div class="links"><!----> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>คู่มือการใช้งานระบบ Storage Service</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/storage-service/docs/#upload" class="sidebar-link">upload</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#download" class="sidebar-link">download</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#store" class="sidebar-link">store</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#put-file" class="sidebar-link">put-file</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#delete-file" class="sidebar-link">delete-file</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#delete-folder" class="sidebar-link">delete-folder</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#example-of-uploading-file-by-php-with-guzzlehttp" class="sidebar-link">Example of uploading file by PHP with GuzzleHttp</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/storage-service/docs/#responses" class="sidebar-link">Responses</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/storage-service/docs/#http-responses" class="sidebar-link">Http Responses</a></li><li class="sidebar-sub-header"><a href="/storage-service/docs/#data" class="sidebar-link">Data</a></li><li class="sidebar-sub-header"><a href="/storage-service/docs/#reply-statuses" class="sidebar-link">Reply statuses</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="คู่มือการใช้งานระบบ-storage-service"><a href="#คู่มือการใช้งานระบบ-storage-service" class="header-anchor">#</a> คู่มือการใช้งานระบบ Storage Service</h1> <p>ระบบ Storage Service เป็นระบบช่วยจัดเก็บไฟล์ต่างๆ ของ client applications โดยมี function ต่างๆ ดังต่อไปนี้</p> <ul><li><a href="#upload">upload</a></li> <li><a href="#download">download</a></li> <li><a href="#store">store</a></li> <li><a href="#put-file">put-file</a></li> <li><a href="#delete-file">delete-file</a></li> <li><a href="#delete-folder">delete-folder</a></li></ul> <h2 id="upload"><a href="#upload" class="header-anchor">#</a> upload</h2> <p>upload เป็น function สำหรับ upload file ต่างๆ จาก client applications ไปเก็บไว้ที่ Storage Service</p> <ol><li>Http Request</li></ol> <table><thead><tr><th style="text-align:center;">route</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>upload</code></td> <td style="text-align:center;"><code>POST</code></td></tr></tbody></table> <ol start="2"><li>ข้อมูลที่ต้องส่งไปยัง Storage Service เพื่อทำการ upload file</li></ol> <table><thead><tr><th>Data</th> <th style="text-align:center;">Required</th> <th style="text-align:left;">Description</th> <th style="text-align:left;">Remark</th></tr></thead> <tbody><tr><td>file</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">ไฟล์ที่ต้องการ upload</td> <td style="text-align:left;">upload ไฟล์ได้ไม่เกินครั้ง 10 mb</td></tr> <tr><td>state</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">storage folder ของ Storage Service ที่ต้องการเก็บไฟล์ โดยส่งคำว่า <code>public</code> หรือ <code>local</code></td> <td style="text-align:left;">หากต้องการเก็บไฟล์ที่สามารถดูผ่าน browser ได้ให้เก็บไฟล์ไว้ที่ <code>public</code></td></tr> <tr><td>sub_folder</td> <td style="text-align:center;"><code>false</code></td> <td style="text-align:left;">เพิ่ม sub folder ภายใต้ folder ที่สร้างขึ้นใน Storage Service</td> <td style="text-align:left;"></td></tr></tbody></table> <h2 id="download"><a href="#download" class="header-anchor">#</a> download</h2> <p>download เป็น function สำหรับ download file จาก Storage Service เข้าสู่ device ของ client</p> <ol><li>Http Request</li></ol> <table><thead><tr><th style="text-align:center;">route</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>files/{slug}</code></td> <td style="text-align:center;"><code>GET</code></td></tr></tbody></table> <ol start="2"><li>ข้อมูลที่ต้องใช้สำหรับการ download file</li></ol> <table><thead><tr><th>Data</th> <th style="text-align:center;">Required</th> <th style="text-align:left;">Description</th> <th style="text-align:left;">Remark</th></tr></thead> <tbody><tr><td>slug</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">value ที่ใช้แทน id ของไฟล์</td> <td style="text-align:left;">จะได้รับ slug หลังจากทำการ upload ไฟล์แล้ว</td></tr></tbody></table> <h2 id="store"><a href="#store" class="header-anchor">#</a> store</h2> <p>store เป็น function สำหรับ store file จาก Storage Service เข้าสู่ folder storage ของ client</p> <ol><li>Http Request</li></ol> <table><thead><tr><th style="text-align:center;">route</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>files/{slug}</code></td> <td style="text-align:center;"><code>GET</code></td></tr></tbody></table> <ol start="2"><li>ข้อมูลที่ต้องใช้สำหรับการ store file</li></ol> <table><thead><tr><th>Data</th> <th style="text-align:center;">Required</th> <th style="text-align:left;">Description</th> <th style="text-align:left;">Remark</th></tr></thead> <tbody><tr><td>slug</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">value ที่ใช้แทน id ของไฟล์</td> <td style="text-align:left;">จะได้รับ slug หลังจากทำการ upload ไฟล์แล้ว</td></tr></tbody></table> <h2 id="put-file"><a href="#put-file" class="header-anchor">#</a> put-file</h2> <p>put-file เป็น function สำหรับ update file ที่อยู่แล้วใน Storage Service</p> <ol><li>Http Request</li></ol> <table><thead><tr><th style="text-align:center;">route</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>put-file</code></td> <td style="text-align:center;"><code>POST</code></td></tr></tbody></table> <ol start="2"><li>ข้อมูลที่ต้องส่งไปยัง Storage Service เพื่อทำการ update file</li></ol> <table><thead><tr><th>Data</th> <th style="text-align:center;">Required</th> <th style="text-align:left;">Description</th> <th style="text-align:left;">Remark</th></tr></thead> <tbody><tr><td>_method</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">method ของการ update file โดยมีค่าเท่ากับ <code>put</code></td> <td style="text-align:left;"></td></tr> <tr><td>slug</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">value ที่ใช้แทน id ของไฟล์</td> <td style="text-align:left;">จะได้รับ slug หลังจากทำการ upload ไฟล์แล้ว</td></tr> <tr><td>file</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">file ใหม่ที่ต้องการส่ง</td> <td style="text-align:left;"></td></tr></tbody></table> <h2 id="delete-file"><a href="#delete-file" class="header-anchor">#</a> delete-file</h2> <p>delete-file เป็น function สำหรับลบ file ใน Storage Service</p> <ol><li>Http Request</li></ol> <table><thead><tr><th style="text-align:center;">route</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>delete-file</code></td> <td style="text-align:center;"><code>POST</code></td></tr></tbody></table> <ol start="2"><li>ข้อมูลที่ต้องส่งไปยัง Storage Service เพื่อทำการลบ file</li></ol> <table><thead><tr><th>Data</th> <th style="text-align:center;">Required</th> <th style="text-align:left;">Description</th> <th style="text-align:left;">Remark</th></tr></thead> <tbody><tr><td>_method</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">method ของการลบ file โดยมีค่าเท่ากับ <code>delete</code></td> <td style="text-align:left;"></td></tr> <tr><td>slug</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">value ที่ใช้แทน id ของไฟล์</td> <td style="text-align:left;"></td></tr></tbody></table> <h2 id="delete-folder"><a href="#delete-folder" class="header-anchor">#</a> delete-folder</h2> <p>delete-folder เป็น function สำหรับลบ folder ใน Storage Service</p> <ol><li>Http Request</li></ol> <table><thead><tr><th style="text-align:center;">route</th> <th style="text-align:center;">method</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>delete-folder</code></td> <td style="text-align:center;"><code>POST</code></td></tr></tbody></table> <ol start="2"><li>ข้อมูลที่ต้องส่งไปยัง Storage Service เพื่อทำการลบ folder</li></ol> <table><thead><tr><th>Data</th> <th style="text-align:center;">Required</th> <th style="text-align:left;">Description</th> <th style="text-align:left;">Remark</th></tr></thead> <tbody><tr><td>_method</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">method ของการลบ folder โดยมีค่าเท่ากับ <code>delete</code></td> <td style="text-align:left;">method's value is <code>delete</code></td></tr> <tr><td>state</td> <td style="text-align:center;"><code>true</code></td> <td style="text-align:left;">storage folder ของ Storage Service ที่ต้องการลบ folderโดยส่งคำว่า <code>public</code> หรือ <code>local</code></td> <td style="text-align:left;"></td></tr> <tr><td>folder</td> <td style="text-align:center;"><code>false</code></td> <td style="text-align:left;">ชื่อของ folder ที่ต้องการลบ</td> <td style="text-align:left;"></td></tr></tbody></table> <h2 id="example-of-uploading-file-by-php-with-guzzlehttp"><a href="#example-of-uploading-file-by-php-with-guzzlehttp" class="header-anchor">#</a> Example of uploading file by PHP with GuzzleHttp</h2> <p>ตัวอย่างการ upload file ไปยัง Storage Service โดยใช้ PHP และ GuzzleHttp</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/upload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$client</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GuzzleHttp<span class="token punctuation">\</span>Client</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'base_uri'</span> <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'https://little-fortune.me/storage-service/'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'timeout'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">8.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$client</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'upload'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'headers'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'Accept'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'application/json'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'token'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> app_token<span class="token punctuation">,</span> 
            <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> app_secret
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'multipart'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'name'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'state'</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'contents'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'public'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'name'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'file'</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'contents'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'r+'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'name'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'sub_path'</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'contents'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'pdf'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">200</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// in case of successed</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="responses"><a href="#responses" class="header-anchor">#</a> Responses</h2> <h3 id="http-responses"><a href="#http-responses" class="header-anchor">#</a> Http Responses</h3> <table><thead><tr><th style="text-align:center;">Status code</th> <th style="text-align:left;">Status text</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:center;">200</td> <td style="text-align:left;">OK</td> <td style="text-align:left;">สามารถส่ง Request ไปยัง Storage Service ได้สำเร็จ</td></tr> <tr><td style="text-align:center;">400</td> <td style="text-align:left;">incomplete request</td> <td style="text-align:left;">ส่งข้อมูลไปยัง Storage Service ไม่ครบถ้วน</td></tr> <tr><td style="text-align:center;">401</td> <td style="text-align:left;">not allowed</td> <td style="text-align:left;">Client ไม่ได้รับอนุญาติให้ดำเนินการต่างๆ กับ Storage Service</td></tr> <tr><td style="text-align:center;">500</td> <td style="text-align:left;">internal server error</td> <td style="text-align:left;">เกิด error ที่ฝั่ง Storage Service</td></tr></tbody></table> <h3 id="data"><a href="#data" class="header-anchor">#</a> Data</h3> <p>ข้อมูลที่ client จะได้รับจาก Storage Service ในการดำเนินการ upload และ upload file</p> <table><thead><tr><th style="text-align:center;">data</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:center;">path</td> <td style="text-align:left;">directory ที่จัดเก็บ file</td></tr> <tr><td style="text-align:center;">state</td> <td style="text-align:left;">storage folder ของ Storage Service ที่จัดเก็บ file</td></tr> <tr><td style="text-align:center;">name</td> <td style="text-align:left;">ชื่อของ file</td></tr> <tr><td style="text-align:center;">type</td> <td style="text-align:left;">ประเภทของ file</td></tr> <tr><td style="text-align:center;">size</td> <td style="text-align:left;">ขนาดของ file</td></tr> <tr><td style="text-align:center;">url</td> <td style="text-align:left;">กรณีที่ เก็บไฟล์ไว้ใน <code>public</code> ระบบจะ return URL ที่ใช้สำหรับเข้าถึง file ผ่าน browser</td></tr> <tr><td style="text-align:center;">slug</td> <td style="text-align:left;">value ที่ใช้แทน id ของไฟล์</td></tr> <tr><td style="text-align:center;">created_at</td> <td style="text-align:left;">วันและเวลาที่ upload file</td></tr> <tr><td style="text-align:center;">updated_at</td> <td style="text-align:left;">วันและเวลาที่มีการ update file</td></tr></tbody></table> <h3 id="reply-statuses"><a href="#reply-statuses" class="header-anchor">#</a> Reply statuses</h3> <p>ข้อมูลที่ client จะได้รับจาก Storage Service ในการดำเนินการต่างๆ</p> <table><thead><tr><th style="text-align:center;">reply_code</th> <th style="text-align:left;">reply_text</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:center;">0</td> <td style="text-align:left;">OK</td> <td>ดำเนินการสำเร็จ</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:left;">no file</td> <td>ไม่มี file ที่ต้องการ upload</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:left;">no current file in storage</td> <td>ไม่มี file ปัจจุบันใน storage</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:left;">Don't have permission to delete file</td> <td>ไม่มีสิทธิ์ในการลบไฟล์</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/storage-service/docs/assets/js/app.1aaca16b.js" defer></script><script src="/storage-service/docs/assets/js/2.9cde0b82.js" defer></script><script src="/storage-service/docs/assets/js/5.1b3ec486.js" defer></script>
  </body>
</html>
